name: Organize Algorithm Solutions

on:
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰
  push:
    paths:
      - '[0-9][0-9][0-9][0-9]-*/**'  # LeetCode í´ë” íŒ¨í„´
      - 'ë°±ì¤€/**'                    # ë°±ì¤€ í´ë” ë³€ê²½ ê°ì§€

jobs:
  organize-and-update:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          # ì»¤ë°‹ ê¸°ë¡ ë¹„êµë¥¼ ìœ„í•´ fetch-depthë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì „ì²´ íˆìŠ¤í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
          fetch-depth: 0

      - name: Move LeetCode solutions
        id: move_leethub
        run: |
          mkdir -p LeetCode
          found=false
          for d in [0-9][0-9][0-9][0-9]-*; do
            if [ -d "$d" ]; then
              echo "Moving LeetCode directory: $d"
              # ì¤‘ë³µ í´ë”ê°€ ìˆì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ -n ì˜µì…˜ ì‚¬ìš©
              mv -n "$d" "LeetCode/"
              found=true
            fi
          done
          if $found; then
            echo "âœ… LeetCode directories moved."
          else
            echo "â„¹ï¸ No new LeetCode directories to move."
          fi
          # ë³€ê²½ ì—¬ë¶€ë¥¼ ë‹¤ìŒ ìŠ¤í…ì— ì „ë‹¬
          echo "leethub_changed=$found" >> $GITHUB_OUTPUT

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests

      - name: Update README for Baekjoon
        id: update_readme
        run: |
          # ì´ë²ˆ í‘¸ì‹œì—ì„œ 'ë°±ì¤€/' í´ë”ì— ë³€ê²½ì´ ìˆì—ˆëŠ”ì§€ í™•ì¸
          if git diff --name-only HEAD~1 HEAD | grep -q "ë°±ì¤€/"; then
            echo "Changes detected in 'ë°±ì¤€/' directory. Updating README..."
            python scripts/update_readme.py
          else
            echo "â„¹ï¸ No changes in 'ë°±ì¤€/' directory. Skipping README update."
          fi

      - name: Commit & Push changes
        run: |
          # git statusë¡œ ì‹¤ì œ íŒŒì¼ ë³€ê²½ì´ ìˆëŠ”ì§€ ìµœì¢… í™•ì¸
          if ! git diff --quiet; then
            git config --global user.name 'github-actions[bot]'
            git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          
            git add LeetCode/ README.md
            git commit -m "chore(auto): Organize solutions & update README" -m "LeetCode í´ë”ë¥¼ ì •ë¦¬í•˜ê³  ë°±ì¤€ ë¬¸ì œ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."
          
            echo "ğŸš€ Pushing changes to repository..."
            git push
          else
            echo "âœ… No changes to commit."
          fi


#name: Organize Algorithm Solutions
#
#on:
#  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰
#  push:
#    paths:
#      - '[0-9][0-9][0-9][0-9]-*/**'  # LeetCode í´ë” íŒ¨í„´
#      - 'ë°±ì¤€/**'                    # ë°±ì¤€ í´ë” ë³€ê²½ ê°ì§€
#
#jobs:
#  organize-and-update:
#    runs-on: ubuntu-latest
#    permissions:
#      contents: write
#    steps:
#      - name: Checkout repository
#        uses: actions/checkout@v3
#        with:
#          # ì»¤ë°‹ ê¸°ë¡ ë¹„êµë¥¼ ìœ„í•´ fetch-depthë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì „ì²´ íˆìŠ¤í† ë¦¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
#          fetch-depth: 0
#
#      - name: Move LeetCode solutions
#        id: move_leethub
#        run: |
#          mkdir -p LeetCode
#          found=false
#          for d in [0-9][0-9][0-9][0-9]-*; do
#            if [ -d "$d" ]; then
#              echo "Moving LeetCode directory: $d"
#              # ì¤‘ë³µ í´ë”ê°€ ìˆì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ -n ì˜µì…˜ ì‚¬ìš©
#              mv -n "$d" "LeetCode/"
#              found=true
#            fi
#          done
#          if $found; then
#            echo "âœ… LeetCode directories moved."
#          else
#            echo "â„¹ï¸ No new LeetCode directories to move."
#          fi
#          # ë³€ê²½ ì—¬ë¶€ë¥¼ ë‹¤ìŒ ìŠ¤í…ì— ì „ë‹¬
#          echo "leethub_changed=$found" >> $GITHUB_OUTPUT
#
#      - name: Setup Python
#        uses: actions/setup-python@v4
#        with:
#          python-version: '3.9'
#
#      - name: Update README for Baekjoon
#        id: update_readme
#        run: |
#          # ì´ë²ˆ í‘¸ì‹œì—ì„œ 'ë°±ì¤€/' í´ë”ì— ë³€ê²½ì´ ìˆì—ˆëŠ”ì§€ í™•ì¸
#          if git diff --name-only HEAD~1 HEAD | grep -q "ë°±ì¤€/"; then
#            echo "Changes detected in 'ë°±ì¤€/' directory. Updating README..."
#            python scripts/update_readme.py
#          else
#            echo "â„¹ï¸ No changes in 'ë°±ì¤€/' directory. Skipping README update."
#          fi
#
#      - name: Commit & Push changes
#        run: |
#          # git statusë¡œ ì‹¤ì œ íŒŒì¼ ë³€ê²½ì´ ìˆëŠ”ì§€ ìµœì¢… í™•ì¸
#          if ! git diff --quiet; then
#            git config --global user.name 'github-actions[bot]'
#            git config --global user.email 'github-actions[bot]@users.noreply.github.com'
#
#            git add LeetCode/ README.md
#            git commit -m "chore(auto): Organize solutions & update README" -m "LeetCode í´ë”ë¥¼ ì •ë¦¬í•˜ê³  ë°±ì¤€ ë¬¸ì œ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤."
#
#            echo "ğŸš€ Pushing changes to repository..."
#            git push
#          else
#            echo "âœ… No changes to commit."
#          fi
#
#
##name: Move LeetCode Solutions
##
##on:
##  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ì˜µì…˜ ìœ ì§€
##  push:
##    paths:
##      - '[0-9][0-9][0-9][0-9]-*/**'  # LeetHubê°€ ìƒì„±í•˜ëŠ” í´ë” íŒ¨í„´ (ì˜ˆ: 0020-valid-parentheses)
##
##jobs:
##  move-files:
##    runs-on: ubuntu-latest
##    permissions:
##      contents: write
##    steps:
##      - name: Checkout repository
##        uses: actions/checkout@v3
##        with:
##          fetch-depth: 2  # ìµœê·¼ ì»¤ë°‹ ê¸°ë¡ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ì„¤ì •
##
##      - name: Move LeetCode solutions
##        run: |
##          # ë””ë²„ê¹…ì„ ìœ„í•œ í˜„ì¬ ë””ë ‰í† ë¦¬ ë‚´ìš© ì¶œë ¥
##          echo "Current directory contents:"
##          ls -la
##
##          # LeetCode í´ë”ê°€ ì—†ë‹¤ë©´ ìƒì„±
##          mkdir -p LeetCode
##
##          # ë³€ê²½ëœ íŒŒì¼ ëª©ë¡ í™•ì¸
##          echo "Changed files in this push:"
##          git diff --name-only HEAD^ HEAD
##
##          # LeetHubê°€ ìƒì„±í•œ í´ë”ë“¤ì„ LeetCode í´ë”ë¡œ ì´ë™
##          found=0
##          for d in [0-9][0-9][0-9][0-9]-*; do
##            if [ -d "$d" ]; then
##              echo "Moving directory: $d"
##              mv "$d" "LeetCode/" && found=1
##            fi
##          done
##
##          # ì´ë™í•  í´ë”ë¥¼ ì°¾ì§€ ëª»í–ˆì„ ê²½ìš°ì—ë„ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
##          if [ $found -eq 0 ]; then
##            echo "No matching directories found to move"
##          fi
##
##      - name: Commit & Push changes
##        run: |
##          # ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”ì§€ í™•ì¸
##          if git status --porcelain | grep .; then
##            git config --global user.name 'github-actions[bot]'
##            git config --global user.email 'github-actions[bot]@users.noreply.github.com'
##            git add -A
##            git commit -m "chore: Move LeetCode solutions to LeetCode folder"
##            git push
##          else
##            echo "No changes to commit"
##          fi
